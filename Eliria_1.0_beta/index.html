<!DOCTYPE html>
<html>
    <head>
        <title>CHATBOT</title>
        <link rel="stylesheet" type="text/css" href="estilo.css">
		<meta charset="utf-8">
    </head>
    <body>
		
		
		<script> 
		var bleep = new Audio();
		bleep.src = "sfx/conf.wav";
	    </script>
		
        <div class="chatbox">
            <div class="chatlogs" id="chatlogi">

                


            </div>

            <div class="chat-form">
                <textarea maxlength="23" id="texto"></textarea>
				
                <button class="button" onmousedown="bleep.play()" style="border: 0; background: transparent" id="speakBtn" >
                    <img src="img/mic.png" width="30" height="25" alt="submit" />
                </button>
				
				<button class="button" onmousedown="bleep.play()" style="border: 0; background: transparent" onclick="textBtn()">
					<img src="img/send.png" width="30" height="25" alt="submit" />
                </button>
				
				<button class="button" onmousedown="bleep.play()" style="border: 0; background: transparent" onclick="blink()">
					<img src="img/lamp.png" width="30" height="25" alt="submit" />
                </button>
            </div>
        </div>
		
		
		<!-- COMANDO TEXTO -->
		<script>
		var dNow = new Date();
		var data = dNow.getDate() + '/' + (dNow.getMonth()+1) + '/' + dNow.getFullYear();
		var hora = dNow.getHours()+':'+dNow.getMinutes();

		know = {
				"Oi" : "Olá",
				"que dia é hoje" : data,
				"Que dia é hoje" : data,
				"Que dia é hoje" : data,
				"que horas são" : hora,
				"Que horas são" : hora,
                "como vai" : "muito bem :)",
                "ok" : ":D",
				"Ok" : ":D"
            };
		
		
		                  function textBtn() {
                          
						  
						  var esp = document.createElement('br');
					      var user = document.getElementById("texto").value;
					      var imguser = document.createElement('img');
						  imguser.src= 'img/user.png';
							
						  const element = document.createElement('div');
						  element.classList.add('chat','me');
							
						  imguser.style.width= "60px";
						  imguser.style.height= "60px";
						  imguser.style.background= "#ccc";
						  imguser.style.borderRadius= "50%";
						  imguser.style.overflow= 'hidden';
						  imguser.style.float='right';
							
							
					      element.setAttribute("src","img/user.png");
						  element.setAttribute("width", "304");
						  element.setAttribute("height", "228");
						  element.setAttribute("alt", "The Pulpit Rock");
							
						  element.style.width= "80%";
						  element.style.padding= "15px";
						  element.style.margin= "5px 10px 0";
					      element.style.borderRadius= "10px";
						  element.style.color= "#fff";
						  element.style.size="20px";
						  element.style.background= "#1ddced";
							
							
							
							
						  const elemText= document.createTextNode(user);
							
						  element.appendChild(elemText);
							
						  document.getElementById("chatlogi").appendChild(imguser);
						  document.getElementById("chatlogi").appendChild(element);
						  document.getElementById("chatlogi").appendChild(esp);
						  console.log(element);
								   
					      const elemento = document.createElement('div');
						  elemento.classList.add('chat','bot');
						  console.log(elemento);
						  
						  if (user in know) {
						  
							var espaco = document.createElement('br');
							var imgbot = document.createElement('img');	
							imgbot.src= 'img/bot.png';
						  
							const elementoBot = document.createElement('div');
							elementoBot.classList.add('chat','botz');
						  
							imgbot.style.width= "60px";
							imgbot.style.height= "60px";
							imgbot.style.background= "#ccc";
							imgbot.style.borderRadius= "50%";
							imgbot.style.overflow= 'hidden';
							imgbot.style.float='left';
							imgbot.style.margin="10px";
						  
							elementoBot.style.width= "80%";
							elementoBot.style.padding= "15px";
							elementoBot.style.margin= "5px 15px 0";
							elementoBot.style.borderRadius= "10px";
							elementoBot.style.color= "#fff";
							elementoBot.style.size="20px";
							elementoBot.style.background= "#1adda4";
						  
						  
							const elemTextBot= document.createTextNode(know[user]);
						
							elementoBot.appendChild(elemTextBot);
							
						  
							document.getElementById("chatlogi").appendChild(imgbot);
							document.getElementById("chatlogi").appendChild(elementoBot);
							document.getElementById("chatlogi").appendChild(espaco);
							document.getElementById("texto").value = "";
							
						}else{
							 var espaco = document.createElement('br');
							var imgbot = document.createElement('img');	
							imgbot.src= 'img/bot.png';
						  
							const elementoBot = document.createElement('div');
							elementoBot.classList.add('chat','bot');
						  
							imgbot.style.width= "60px";
							imgbot.style.height= "60px";
							imgbot.style.background= "#ccc";
							imgbot.style.borderRadius= "50%";
							imgbot.style.overflow= 'hidden';
							imgbot.style.float='left';
							imgbot.style.margin="10px";
						  
							elementoBot.style.width= "80%";
							elementoBot.style.padding= "15px";
							elementoBot.style.margin= "5px 15px 0";
							elementoBot.style.borderRadius= "10px";
							elementoBot.style.color= "#fff";
							elementoBot.style.size="20px";
							elementoBot.style.background= "#1adda4";
						  
						  
							const elemTextBot= document.createTextNode("Não Entendi :(");
						
							elementoBot.appendChild(elemTextBot);
							
						  
							document.getElementById("chatlogi").appendChild(imgbot);
							document.getElementById("chatlogi").appendChild(elementoBot);
							document.getElementById("chatlogi").appendChild(espaco);
							document.getElementById("texto").value = "";
						}
					}
				
		
		
		</script>
		
		
		
		<!-- COMANDO DE VOZ -->
		<script>
		var dNow = new Date();
		var data = dNow.getDate() + '/' + (dNow.getMonth()+1) + '/' + dNow.getFullYear();
		var hora = dNow.getHours()+':'+dNow.getMinutes();

		know = {
				"Oi" : "Olá",
				"que dia é hoje" : data,
				"Que dia é hoje" : data,
				"Que dia é hoje" : data,
				"que horas são" : hora,
				"Que horas são" : hora,
                "como vai" : "muito bem :)",
                "ok" : ":D",
				"Ok" : ":D"
            };
		
		
		
        window.addEventListener('DOMContentLoaded', function() {
            var speakBtn = document.querySelector('#speakBtn');

            // testa se o navegador suporta o reconhecimento de voz
            if (window.SpeechRecognition || window.webkitSpeechRecognition) {

                // captura a voz
                var SpeechRecognition = SpeechRecognition || webkitSpeechRecognition;

                var recognition = new SpeechRecognition();

                // inicia reconhecimento
                speakBtn.addEventListener('click', function(e) {
                    recognition.start();
                }, false);

                // resultado do reconhecimento
                recognition.addEventListener('result', function(e) {
                    console.log(e);
                    var result = e.results[0][0].transcript;
                    console.log(result);
                    if (result in know) {
										  
					
					
					      //USER
					      var esp = document.createElement('br');
					      var user = result;
					      var imguser = document.createElement('img');
						  imguser.src= 'img/user.png';
							
						  const element = document.createElement('div');
						  element.classList.add('chat','me');
							
						  imguser.style.width= "60px";
						  imguser.style.height= "60px";
						  imguser.style.background= "#ccc";
						  imguser.style.borderRadius= "50%";
						  imguser.style.overflow= 'hidden';
						  imguser.style.float='right';
							
							
					      element.setAttribute("src","img/user.png");
						  element.setAttribute("width", "304");
						  element.setAttribute("height", "228");
						  element.setAttribute("alt", "The Pulpit Rock");
							
						  element.style.width= "80%";
						  element.style.padding= "15px";
						  element.style.margin= "5px 10px 0";
					      element.style.borderRadius= "10px";
						  element.style.color= "#fff";
						  element.style.size="20px";
						  element.style.background= "#1ddced";
							
							
							
							
						  const elemText= document.createTextNode(user);
							
						  element.appendChild(elemText);
							
						  document.getElementById("chatlogi").appendChild(imguser);
						  document.getElementById("chatlogi").appendChild(element);
						  document.getElementById("chatlogi").appendChild(esp);
						  console.log(element);
								   
					      const elemento = document.createElement('div');
						  elemento.classList.add('chat','bot');
						  console.log(elemento);
					
					
					
					
					
                          //ELIRIA					
						  var espaco = document.createElement('br');
						  var imgbot = document.createElement('img');	
						  imgbot.src= 'img/bot.png';
						  
						  const elementoBot = document.createElement('div');
						  elementoBot.classList.add('chat','botz');
						  
						  imgbot.style.width= "60px";
						  imgbot.style.height= "60px";
						  imgbot.style.background= "#ccc";
						  imgbot.style.borderRadius= "50%";
						  imgbot.style.overflow= 'hidden';
						  imgbot.style.float='left';
						  imgbot.style.margin="10px";
						  
						  elementoBot.style.width= "80%";
						  elementoBot.style.padding= "15px";
						  elementoBot.style.margin= "5px 15px 0";
						  elementoBot.style.borderRadius= "10px";
						  elementoBot.style.color= "#fff";
						  elementoBot.style.size="20px";
						  elementoBot.style.background= "#1adda4";
						  
						  
						  const elemTextBot= document.createTextNode(know[result]);
						
						  elementoBot.appendChild(elemTextBot);
							
						  
						  document.getElementById("chatlogi").appendChild(imgbot);
						  document.getElementById("chatlogi").appendChild(elementoBot);
						  document.getElementById("chatlogi").appendChild(espaco);
                    }else{
					      //USER
					      var esp = document.createElement('br');
						  var user = result;
						  var imguser = document.createElement('img');
						  imguser.src= 'img/user.png';
							
						  const element = document.createElement('div');
						  element.classList.add('chat','me');
							
						  imguser.style.width= "60px";
						  imguser.style.height= "60px";
						  imguser.style.background= "#ccc";
						  imguser.style.borderRadius= "50%";
						  imguser.style.overflow= 'hidden';
						  imguser.style.float='right';
							
							
						  element.setAttribute("src","img/user.png");
						  element.setAttribute("width", "304");
						  element.setAttribute("height", "228");
						  element.setAttribute("alt", "The Pulpit Rock");
							
						  element.style.width= "80%";
						  element.style.padding= "15px";
						  element.style.margin= "5px 10px 0";
						  element.style.borderRadius= "10px";
						  element.style.color= "#fff";
						  element.style.size="20px";
						  element.style.background= "#1ddced";
							
							
							
							
						  const elemText= document.createTextNode(user);
							
						  element.appendChild(elemText);
							
						  document.getElementById("chatlogi").appendChild(imguser);
						  document.getElementById("chatlogi").appendChild(element);
						  document.getElementById("chatlogi").appendChild(esp);
						  console.log(element);
								   
						  const elemento = document.createElement('div');
						  elemento.classList.add('chat','bot');
						  console.log(elemento);
					
						  //ELIRIA
						  var espaco = document.createElement('br');
						  var imgbot = document.createElement('img');	
						  imgbot.src= 'img/bot.png';
						  
						  const elementoBot = document.createElement('div');
						  elementoBot.classList.add('chat','bot');
						  
						  imgbot.style.width= "60px";
						  imgbot.style.height= "60px";
						  imgbot.style.background= "#ccc";
						  imgbot.style.borderRadius= "50%";
						  imgbot.style.overflow= 'hidden';
						  imgbot.style.float='left';
						  imgbot.style.margin="10px";
						  
						  elementoBot.style.width= "80%";
						  elementoBot.style.padding= "15px";
						  elementoBot.style.margin= "5px 15px 0";
						  elementoBot.style.borderRadius= "10px";
						  elementoBot.style.color= "#fff";
						  elementoBot.style.size="20px";
						  elementoBot.style.background= "#1adda4";
						  
						  
						  const elemTextBot= document.createTextNode("Não Entendi :(");
						
						  elementoBot.appendChild(elemTextBot);
							
						  
						  document.getElementById("chatlogi").appendChild(imgbot);
						  document.getElementById("chatlogi").appendChild(elementoBot);
						  document.getElementById("chatlogi").appendChild(espaco);
					}
                   
                }, false);
            } else {
                alert('Este navegador não suporta esta funcionalidade ainda!');
            }

        }, false);
    </script>
	
    </body>
</html>